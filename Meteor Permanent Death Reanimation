getgenv().ReanimationSettings = {
    R6Velocity = Vector3.new(-30, 0, 0),
    R15Velocity = Vector3.new(0, 0, -55),
    SimulationRadius = true,
    Physics = true,
    RemoveAnimations = true,
    R15ToR6 = true, -- The Probably only useful Thing In These Settings
    PermanentDeath = true, -- Doesn't Work Do not turn it to False
    HumanoidLess = false, -- Why Would u even want this?
    BodyVelocity = true
}

-- Physics:

if getgenv().ReanimationSettings.Physics == true then

    settings().Physics.AllowSleep = false
    settings().Physics.DisableCSGv2 = true
    settings().Physics.PhysicsEnvironmentalThrottle = Enum.EnviromentalPhysicsThrottle.Disabled

end

-- Simulation Radius:

if getgenv().ReanimationSettings.SimulationRadius == true then

    game:GetService("RunService").RenderStepped:Connect(function()
        setscriptable(game.Players.LocalPlayer, "SimulationRadius", true)
        sethiddenproperty(game.Players.LocalPlayer, "MaximumSimulationRadius", math.huge)
        sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", math.huge)
    end)

end

-- Variables:

local Workspace = game:GetService("Workspace") and workspace
local Player = game:GetService("Players").LocalPlayer
local Name = Player.Name
local Character = Player.Character or Workspace[Name]
local Root = Character.HumanoidRootPart
local Humanoid = Character:FindFirstChildWhichIsA("Humanoid")
local PhysicsService = game:GetService("PhysicsService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- Humanoid Settings:

if getgenv().ReanimationSettings.RemoveAnimations == true then

    for _,Animations in next, Humanoid:GetPlayingAnimationTracks() do
        Animations:Stop()
    end

    if Humanoid:FindFirstChild("Animator") then
        Humanoid.Animator:Destroy()
    end
    
    if Character:FindFirstChild("Animate") then
        Character.Animate:Destroy()
    end

end

Humanoid:ChangeState(16)

Humanoid.WalkSpeed = 0 
Humanoid.JumpPower = 0 

Humanoid.AutoRotate = false
Humanoid.AutoJumpEnabled = false

-- Rig Body:

Character.Archivable = true

local Dummy = Character:Clone()--game:GetObjects("rbxassetid://9570701779")[1] -- phere's RigBody

Dummy.Parent = Workspace
Dummy.Name = "MeteorReanimate"

Dummy:MoveTo(Root.Position)

-- Invisible Rig Body:

for _,Invisible in pairs(Dummy:GetDescendants()) do
    if Invisible:IsA("BasePart") or Invisible:IsA("Decal") then
        Invisible.Transparency = 1
    end
end

-- Character Settings:

Character.Archivable = true -- Just in Case

-- Updating Variables:

Character.Parent = Dummy

local Character = Dummy
local RealCharacter = Character[Name]

-- Permanent Death:

if getgenv().ReanimationSettings.PermanentDeath == true then

game.Players.LocalPlayer.Character = nil
game.Players.LocalPlayer.Character = Dummy

wait(game.Players.RespawnTime + .35)

task.spawn(function()
    for _,Permanent in pairs(RealCharacter:GetDescendants()) do
        if Permanent:IsA("Motor6D") or Permanent:IsA("Weld") or Permanent:IsA("BallSocketConstraint") or Permanent:IsA("HingeConstraint") then
            Permanent:Destroy()
        end
    end
end)

else 
    
    for _,Joints in pairs(RealCharacter:GetChildren()) do
        if Joints:IsA("BasePart") then
            if Joints.Name ~= "Head" or "Torso" then
                Joints:BreakJoints()
            end
        end
    end
    
end

-- Functions:

function Align(Part1, Part2, Pos, Angle)
    Pos = Pos or CFrame.new(0, 0, 0)
    Angle = Angle or CFrame.Angles(0, 0, 0)
    Part1.CFrame = Part2.CFrame * Pos * Angle
end

function LoadLibrary() -- phere's LoadLibrary
    return loadstring(game:HttpGet("https://pastebin.com/raw/UfzKgS6T", true))()
end

-- No-Clip:

loadstring(game:HttpGet("https://raw.githubusercontent.com/LegoHacker1337/legohacks/main/PhysicsServiceOnClient.lua"))()

if not pcall(function() PhysicsService:GetCollisionGroupId("NoCollide") end) then 
    PhysicsService:CreateCollisionGroup("NoCollide")
    PhysicsService:CollisionGroupSetCollidable("NoCollide", "NoCollide", false)
end

for _,NoClip in pairs(Dummy:GetDescendants()) do
    if NoClip:IsA("BasePart") then
        PhysicsService:SetPartCollisionGroup(NoClip, "NoCollide")
    end
end

local NoclipConnection; NoclipConnection = RunService.Stepped:Connect(function()
    if not Character:IsDescendantOf(game) or not Dummy:IsDescendantOf(game) then
        NoclipConnection:Disconnect()
        return
    end
    
    for _, Object in pairs(Dummy:GetChildren()) do
        if Object:IsA("BasePart") then
            Object.CanCollide = false
        end
    end
end)

-- Body Velocity:

if getgenv().ReanimationSettings.BodyVelocity == true then

    for _,Body in pairs(RealCharacter:GetChildren()) do
        if Body:IsA("BasePart") then
            local Stability = Instance.new("BodyVelocity"); Stability.Parent = RealCharacter; Stability.Name = "Meteor";Stability.MaxForce = Vector3.new(math.huge, math.huge, math.huge); Stability.Velocity = Vector3.new(0, 0, 0)
        end
    end

end

-- Align Section:

if Humanoid.RigType == Enum.HumanoidRigType.R6 then -- R6 RigBody
    
    -- Velocity:

    for _,Netless in pairs(RealCharacter:GetDescendants()) do
        if Netless:IsA("BasePart") then
            spawn(function()
                while task.wait(1-1) do
                    Netless.AssemblyLinearVelocity = getgenv().ReanimationSettings.R6Velocity
                end
            end)
        end
    end
    
    -- Align Limbs:
    
    spawn(function()
        while task.wait() do
            
            for _,Accessory1 in pairs(RealCharacter:GetChildren()) do
                if Accessory1:IsA("Accessory") then
                    for _,Accessory2 in pairs(Dummy:GetChildren()) do
                        if Accessory2:IsA("Accessory") then
                            Align(RealCharacter[Accessory1.Name].Handle, Dummy[Accessory1.Name].Handle, CFrame.new(0, 0, 0), CFrame.Angles(0, 0, 0))
                        end
                    end
                end
            end
            
            Align(RealCharacter["Head"], Character["Head"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
            Align(RealCharacter["Torso"], Character["Torso"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
            Align(RealCharacter["HumanoidRootPart"], Dummy["HumanoidRootPart"], CFrame.new(0.01, 0.01, 0.01), CFrame.new(0.01, 0.01, 0.01))
            Align(RealCharacter["Right Arm"], Character["Right Arm"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
            Align(RealCharacter["Left Arm"], Character["Left Arm"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
            Align(RealCharacter["Right Leg"], Character["Right Leg"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
            Align(RealCharacter["Left Leg"], Character["Left Leg"], CFrame.new(0.01, 0.01, 0.01), CFrame.Angles(0.01, 0.01, 0.01))
        end
    end)
    
elseif Humanoid.RigType == Enum.HumanoidRigType.R15 then -- R15 RigBody
    
    if getgenv().ReanimationSettings.R15ToR6 == true then
    
        local Dummy = game:GetObjects("rbxassetid://9570701779")[1]
        
        for _,Cloning in pairs(RealCharacter:GetChildren()) do
            if Cloning:IsA("Accessory") then
                local FakeAccessories = Cloning:Clone()
                FakeAccessories.Parent = Dummy
            end
        end
    
        -- Velocity:

        for _,Netless in pairs(RealCharacter:GetDescendants()) do
            if Netless:IsA("BasePart") then
                spawn(function()
                    while task.wait(1-1) do
                        Netless.AssemblyLinearVelocity = getgenv().ReanimationSettings.R15Velocity
                    end
                end)
            end
        end
    
        -- Align:
   
        spawn(function()
            while task.wait(1-1) do
                
                for _,Accessory1 in pairs(RealCharacter:GetChildren()) do
                    if Accessory1:IsA("Accessory") then
                        for _,Accessory2 in pairs(Dummy:GetChildren()) do
                            if Accessory2:IsA("Accessory") then
                                Align(RealCharacter[Accessory1.Name].Handle, Dummy[Accessory1.Name].Handle, CFrame.new(0, 0, 0), CFrame.Angles(0, 0, 0))
                            end
                        end
                    end
                end
                
                Align(RealCharacter["RightUpperArm"], Dummy["Right Arm"], CFrame.new(0,0.36867332458496094,0), CFrame.Angles(0,0,0))
                Align(RealCharacter["RightLowerArm"], Dummy["Right Arm"], CFrame.new(0,-0.22407126426696777,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["RightHand"], Dummy["Right Arm"], CFrame.new(0,-0.8500454425811768,0), CFrame.Angles(0, 0, 0))

                Align(RealCharacter["LeftUpperArm"], Dummy["Left Arm"], CFrame.new(0,0.36867332458496094,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["LeftLowerArm"], Dummy["Left Arm"], CFrame.new(0,-0.22407126426696777,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["LeftHand"], Dummy["Left Arm"], CFrame.new(0,-0.8500454425811768,0), CFrame.Angles(0, 0, 0))

                Align(RealCharacter["RightUpperLeg"], Dummy["Right Leg"], CFrame.new(0,0.5792183876037598,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["RightLowerLeg"], Dummy["Right Leg"], CFrame.new(0,-0.20090234279632568,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["RightFoot"], Dummy["Right Leg"], CFrame.new(0,-0.8499990701675415,0), CFrame.Angles(0, 0, 0))

                Align(RealCharacter["LeftUpperLeg"], Dummy["Left Leg"], CFrame.new(0,0.5792183876037598,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["LeftLowerLeg"], Dummy["Left Leg"], CFrame.new(0,-0.20090234279632568,0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["LeftFoot"], Dummy["Left Leg"], CFrame.new(0,-0.8499990701675415,0), CFrame.Angles(0, 0, 0))

                Align(RealCharacter["HumanoidRootPart"], Dummy.HumanoidRootPart, CFrame.new(0.01, 0.01, 0.01), CFrame.new(0.01, 0.01, 0.01))
                Align(RealCharacter["UpperTorso"], Dummy.Torso, CFrame.new(0, 0.1999831199645996, 0), CFrame.Angles(0, 0, 0))
                Align(RealCharacter["LowerTorso"], Dummy.Torso, CFrame.new(0, -0.8000273704528809, 0), CFrame.Angles(0, 0, 0))
            
                Align(RealCharacter["Head"], Dummy["Head"], CFrame.new(0, 0, 0), CFrame.Angles(0, 0, 0))
            end
        end)
   
   end
else
    error("What rig are u fucking using bro?")
end

-- HumanoidLess:

if getgenv().ReanimationSettings.HumanoidLess == true then
    
    if Dummy:FindFirstChildWhichIsA("Humanoid") then
        Humanoid:Destroy()
    end
    
end

-- Camera:

workspace.CurrentCamera.CameraSubject = Dummy.Humanoid
